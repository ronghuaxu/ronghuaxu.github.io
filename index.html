<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="code talk" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="展示自己的一些技术文章,以及自己克服的一些技术障碍,为以后回顾打好基础.">
<meta property="og:type" content="website">
<meta property="og:title" content="我就是我,是不一样的烟火">
<meta property="og:url" content="https://ronghuaxu.github.io/index.html/index.html">
<meta property="og:site_name" content="我就是我,是不一样的烟火">
<meta property="og:description" content="展示自己的一些技术文章,以及自己克服的一些技术障碍,为以后回顾打好基础.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="我就是我,是不一样的烟火">
<meta name="twitter:description" content="展示自己的一些技术文章,以及自己克服的一些技术障碍,为以后回顾打好基础.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://ronghuaxu.github.io/index.html/"/>





  <title> 我就是我,是不一样的烟火 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">我就是我,是不一样的烟火</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://ronghuaxu.github.io/index.html/2017/04/06/HTTPS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="华子">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我就是我,是不一样的烟火">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/06/HTTPS/" itemprop="url">
                  安全http(https)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-06T10:08:29+08:00">
                2017-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机网络/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="HTTP的缺点"><a href="#HTTP的缺点" class="headerlink" title="HTTP的缺点"></a>HTTP的缺点</h2><h3 id="通信使用明文-可能会被窃听"><a href="#通信使用明文-可能会被窃听" class="headerlink" title="通信使用明文,可能会被窃听"></a>通信使用明文,可能会被窃听</h3><p>所谓互联网,是由能连通到全世界的网络组成的.无论世界哪个角落的服务器在和客户端通信时,<br>在此通信线路上的某些网络设备,光缆,计算机等都不可能是个人的私有物,不排除某个环节遭到恶意<br>窥视行为.<br><img src="https://ww4.sinaimg.cn/large/006tKfTcgy1fecqjz5ntcj30iz09k3zd.jpg" alt=""></p>
<h3 id="不验证通信方的身份就可能遭遇伪装"><a href="#不验证通信方的身份就可能遭遇伪装" class="headerlink" title="不验证通信方的身份就可能遭遇伪装"></a>不验证通信方的身份就可能遭遇伪装</h3><p>HTTP协议中的请求和响应不会对通信方进行确认.<br><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fecqkdqhb6j30dm09gwew.jpg" alt=""></p>
<h3 id="无法证明报文的完整性-可能已遭到篡改"><a href="#无法证明报文的完整性-可能已遭到篡改" class="headerlink" title="无法证明报文的完整性,可能已遭到篡改"></a>无法证明报文的完整性,可能已遭到篡改</h3><p>所谓完整性是指信息的准确度,意味着http无法判断信息是否准确<br><img src="https://ww3.sinaimg.cn/large/006tKfTcgy1fecqllv3grj30eo0aq3z9.jpg" alt=""></p>
<blockquote>
<p>比如,从某个Web网站上下载内容,是无法确定客户端下载的文件和服务器上存放的文件是否前后一致.及时内容真的已经改变,作为接收的客户端也是察觉不到的</p>
</blockquote>
<h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><h3 id="为了统一解决上述http这些问题-需要在http上加入加密和认证等机制-这样的处理方式称为https"><a href="#为了统一解决上述http这些问题-需要在http上加入加密和认证等机制-这样的处理方式称为https" class="headerlink" title="为了统一解决上述http这些问题,需要在http上加入加密和认证等机制,这样的处理方式称为https"></a>为了统一解决上述http这些问题,需要在http上加入加密和认证等机制,这样的处理方式称为https</h3><p><img src="https://ww4.sinaimg.cn/large/006tKfTcgy1fecqmwznydj30gr09kdgi.jpg" alt=""></p>
<blockquote>
<p>比如在Web页面中输入信用卡号,采用http的话,如果这条线路遭到窃听,那么信用卡卡号就暴露了.</p>
</blockquote>
<h3 id="https并非是应用层的新协议-只是http通讯接口部分使用SSL和TLS协议替换而已"><a href="#https并非是应用层的新协议-只是http通讯接口部分使用SSL和TLS协议替换而已" class="headerlink" title="https并非是应用层的新协议.只是http通讯接口部分使用SSL和TLS协议替换而已."></a>https并非是应用层的新协议.只是http通讯接口部分使用SSL和TLS协议替换而已.</h3><p><img src="https://ww1.sinaimg.cn/large/006tKfTcgy1fecqp7ck4fj30gf07m0t3.jpg" alt=""></p>
<blockquote>
<p>SSL是独立于HTTP的协议,所以不光是HTTP协议,其运行在应用层的SMTP(POP3)和telnet等协议均可配合SSL协议使用.可以说SSL是当今世界上应用最为广泛的网络安全技术.</p>
</blockquote>
<h3 id="加密方法介绍"><a href="#加密方法介绍" class="headerlink" title="加密方法介绍"></a>加密方法介绍</h3><ul>
<li>共享密钥加密<br><img src="https://ww3.sinaimg.cn/large/006tKfTcgy1fecqrjivaij30ce09d3yv.jpg" alt=""></li>
<li>公开密钥加密<br><img src="https://ww4.sinaimg.cn/large/006tKfTcgy1fecqs6y91bj30cy09qq3j.jpg" alt=""></li>
</ul>
<h3 id="RSA算法介绍"><a href="#RSA算法介绍" class="headerlink" title="RSA算法介绍"></a>RSA算法介绍</h3><p>RSA公钥加密算法的介绍(qq邮箱登录就是用了RSA算法加密)<br><img src="https://ww3.sinaimg.cn/large/006tKfTcgy1fecqt6g2akj30co0a8glt.jpg" alt=""><br>qq邮箱加密引用RSA加密技术:<br><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fecqtp65pdj30bs00ka9y.jpg" alt=""><br>参数依次代表密码,根据qq账号生成的salt值,验证码/伪验证码,是否将密码用md5加密(false)</p>
<p>加密后的结果:<br><img src="https://ww3.sinaimg.cn/large/006tKfTcgy1fecqu86kecj30bs01maa7.jpg" alt=""></p>
<blockquote>
<p>RSA的安全性依赖于大数分解，但是否等同于大数分解一直未能得到理论上的证明，因为没有证明破解RSA就一定需要作大数分解。假设存在一种无须分解大数的算法，那它肯定可以修改成为大数分解算法。 RSA 的一些变种算法已被证明等价于大数分解。不管怎样，分解n是最显然的攻击方法。人们已能分解多个十进制位的大素数。因此，模数n必须选大一些，因具体适用情况而定。</p>
</blockquote>
<h3 id="HTTPS采用混合加密机制-共享加密和公开密钥加密"><a href="#HTTPS采用混合加密机制-共享加密和公开密钥加密" class="headerlink" title="HTTPS采用混合加密机制(共享加密和公开密钥加密)"></a>HTTPS采用混合加密机制(共享加密和公开密钥加密)</h3><p><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fecqv3jox4j30ce0b8dgo.jpg" alt=""></p>
<h3 id="证明公开密钥正确性的证书"><a href="#证明公开密钥正确性的证书" class="headerlink" title="证明公开密钥正确性的证书"></a>证明公开密钥正确性的证书</h3><p>数字证书认证机构颁发的公开密钥证书的使用<br><img src="https://ww1.sinaimg.cn/large/006tKfTcgy1fecqvhrl41j30ck0awmyc.jpg" alt=""></p>
<h3 id="证书使用的实际应用-Charles-抓包工具"><a href="#证书使用的实际应用-Charles-抓包工具" class="headerlink" title="证书使用的实际应用(Charles 抓包工具)"></a>证书使用的实际应用(Charles 抓包工具)</h3><p>使用Charles访问百度(https)无法访问这样的情况呢？原因是Charles相当于一个中间人代理，用户的浏览器如果直接访问目标服务器，验证CA证书有效，所以不会出这种提示，但是在中间加入Charles代理后，实际上用户浏览器就会验证Charles提供的证书，这里显然是验证不过的，所以就会出现这种提示。我们必须手动在客户端导入Charles的证书，才能不出现这个信任提示.<br><img src="https://ww1.sinaimg.cn/large/006tKfTcgy1fecqx257dhj30a108fwex.jpg" alt=""></p>
<h3 id="整个https流程的图解"><a href="#整个https流程的图解" class="headerlink" title="整个https流程的图解"></a>整个https流程的图解</h3><p><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fecqy48u02j30hh0b7408.jpg" alt=""></p>
<h3 id="SSL和TLS"><a href="#SSL和TLS" class="headerlink" title="SSL和TLS"></a>SSL和TLS</h3><p><img src="https://ww3.sinaimg.cn/large/006tKfTcgy1fecqyiw3osj30m00b8abt.jpg" alt=""></p>
<h3 id="HTTPS和OpenSSL的关系"><a href="#HTTPS和OpenSSL的关系" class="headerlink" title="HTTPS和OpenSSL的关系"></a>HTTPS和OpenSSL的关系</h3><p>telnet和openssl命令行的区别:<br><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fecqzhgz9rj30hq0ee408.jpg" alt=""></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><img src="https://ww3.sinaimg.cn/large/006tKfTcgy1fecr09pkjrj30e2064jro.jpg" alt=""></p>
<p><img src="https://ww1.sinaimg.cn/large/006tKfTcgy1fecr0ecitbj30e206mdga.jpg" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://ronghuaxu.github.io/index.html/2017/04/06/IPv4协议/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="华子">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我就是我,是不一样的烟火">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/06/IPv4协议/" itemprop="url">
                  IPv4协议简介
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-06T09:20:51+08:00">
                2017-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机网络/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><ul>
<li>IPv4地址长度是32位,它唯一地且全球性地定义了一台主机或路由器与因特网之间的一个连接</li>
<li>IP地址是唯一且全球统一的</li>
</ul>
<p><img src="https://ww1.sinaimg.cn/large/006tKfTcgy1fecpd2l7rcj30lw0jddh6.jpg" alt=""></p>
<h3 id="IPv4的记法"><a href="#IPv4的记法" class="headerlink" title="IPv4的记法"></a>IPv4的记法</h3><p><b>IPv4的十进制和二进制表示的形式及两者之间的转化<br><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fecpe7npadj30lx0g4jtt.jpg" alt=""></b></p>
<p><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fecpf73v48j30mn0gaq4h.jpg" alt=""></p>
<h3 id="三种逻辑运算"><a href="#三种逻辑运算" class="headerlink" title="三种逻辑运算"></a>三种逻辑运算</h3><p><b>介绍三种运算:非(NOT),与(AND),或(OR)   </b></p>
<ul>
<li>非(NOT)<br><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fecpghfcssj30ha07caag.jpg" alt=""></li>
<li>与(AND)<br><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fecpgpb2bej30q6084mxu.jpg" alt=""></li>
<li>或(OR)<br><img src="https://ww4.sinaimg.cn/large/006tKfTcgy1fecpgwa725j30pu086wf4.jpg" alt=""></li>
</ul>
<h2 id="分类编织"><a href="#分类编织" class="headerlink" title="分类编织"></a>分类编织</h2><ul>
<li>在IP地址诞生之初就使用了分类的概念</li>
<li>这种体系结构称为分类编址</li>
</ul>
<p><img src="https://ww4.sinaimg.cn/large/006tKfTcgy1fecpj2ov24j30p20fywi6.jpg" alt=""></p>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p>在分类编址中,地址空间共分为5类:A,B,C,D,E</p>
<ul>
<li>各分类地址空间占用情况<br><img src="https://ww3.sinaimg.cn/large/006tKfTcgy1fecpjwz71xj30om0903zz.jpg" alt=""></li>
<li>找出地址的类别<br><img src="https://ww3.sinaimg.cn/large/006tKfTcgy1fecpkqhcwqj30tk08e40u.jpg" alt=""></li>
<li>通过连续检查来找出地址分类<br><img src="https://ww3.sinaimg.cn/large/006tKfTcgy1fecpl2b38pj30qc052aah.jpg" alt=""></li>
<li>网络标识(Netid)和主机标识Hostid<br><img src="https://ww1.sinaimg.cn/large/006tKfTcgy1fecpl6irh7j30mo07qgmp.jpg" alt=""></li>
</ul>
<h3 id="地址类和地址块"><a href="#地址类和地址块" class="headerlink" title="地址类和地址块"></a>地址类和地址块</h3><ul>
<li>此处以A类地址举例说明,其它类别可以类推<br><img src="https://ww1.sinaimg.cn/large/006tKfTcgy1fecpm7enj9j312b0gegpz.jpg" alt=""></li>
<li>五类地址地址类和地址块的详细情况描述<br><img src="https://ww4.sinaimg.cn/large/006tKfTcgy1fecpnh6c1sj30no0aqwgs.jpg" alt=""></li>
</ul>
<h3 id="子网划分"><a href="#子网划分" class="headerlink" title="子网划分"></a>子网划分</h3><p>A类和B类地址块已几近耗尽,而C类地址块又太小,所以子网划分技术孕育而生<br><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fecpo8grktj30oj0ex0v4.jpg" alt=""></p>
<h2 id="无分类编址"><a href="#无分类编址" class="headerlink" title="无分类编址"></a>无分类编址</h2><p><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fecpp6njrnj30sg08240a.jpg" alt=""></p>
<ul>
<li>分类编址中划分子网并没有实际上解决地址耗尽的问题</li>
<li>子网划分使得地址分配和路由选择变得更加困难</li>
<li>无分类编址在分配地址时,类别的特权被取消了,在更长的IP地址IPv6到来之前,人们的一种临时解决方案</li>
</ul>
<h2 id="特殊地址"><a href="#特殊地址" class="headerlink" title="特殊地址"></a>特殊地址</h2><h3 id="特殊地址块"><a href="#特殊地址块" class="headerlink" title="特殊地址块"></a>特殊地址块</h3><ul>
<li>全0地址</li>
<li>全1地址: 受限广播地址</li>
<li>环回地址</li>
<li>专用地址</li>
<li>多播地址</li>
</ul>
<h3 id="每个地址块中的特殊地址"><a href="#每个地址块中的特殊地址" class="headerlink" title="每个地址块中的特殊地址"></a>每个地址块中的特殊地址</h3><ul>
<li>网络地址</li>
<li>直接广播地址</li>
</ul>
<h2 id="NAT技术"><a href="#NAT技术" class="headerlink" title="NAT技术"></a>NAT技术</h2><p>NAT可用于提供在专用地址和全球地址之间的相互映射,同时也支持虚拟专用网络<br><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fecpt4pypbj30pg07ojs2.jpg" alt=""></p>
<h3 id="地址转换"><a href="#地址转换" class="headerlink" title="地址转换"></a>地址转换</h3><p>所有外出的分组都要通过这台NAT路由器,它负责将分组中的源地址转换为全球地址.<br><img src="https://ww1.sinaimg.cn/large/006tKfTcgy1fecptret81j30ss084jsq.jpg" alt=""></p>
<h3 id="转换表"><a href="#转换表" class="headerlink" title="转换表"></a>转换表</h3><p>NAT的三种方式实现唯一辨别内部的主机:1)使用一个IP地址,2)使用IP地址池,3)使用IP地址和端口地址</p>
<ul>
<li>使用一个ip地址</li>
</ul>
<p><img src="https://ww1.sinaimg.cn/large/006tKfTcgy1fecpu85bh3j30oi0dsgn7.jpg" alt=""></p>
<ul>
<li>使用ip地址池</li>
</ul>
<p><img src="https://ww2.sinaimg.cn/large/006tKfTcgy1fecpudt0rcj30wo066di0.jpg" alt=""></p>
<ul>
<li>使用ip地址和端口地址</li>
</ul>
<p><img src="https://ww4.sinaimg.cn/large/006tKfTcgy1fecpuigit9j30um058mxx.jpg" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://ronghuaxu.github.io/index.html/2017/03/29/提利昂·兰尼斯特-权利的游戏/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="华子">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我就是我,是不一样的烟火">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/29/提利昂·兰尼斯特-权利的游戏/" itemprop="url">
                  提利昂·兰尼斯特：我的一切努力，不过是为了获得父亲的肯定
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-29T15:52:50+08:00">
                2017-03-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/权利的游戏/" itemprop="url" rel="index">
                    <span itemprop="name">权利的游戏</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>当一个人，终其一生都在寻求自己父亲的肯定，却始终得不到承认时，会发生什么？</p>
<p>HBO美剧《权力的游戏》是一部“杀人如麻”的剧集。剧中那些一开始看起来非常有主角光环的人，分分钟就都被原著作者、也是剧集监制的乔治·马丁写死了。因此，第6季开播后，大家最关心的就是：这一季里又死了哪些人？</p>
<p>但有一个很特别的角色（也是我最喜欢的角色），却一直凭借自己的智慧和努力活在这个世界里。他是提利昂·兰尼斯特。</p>
<p>提利昂不是一个完美的人。他天生畸形，外貌丑陋。他还有很多行为上的缺点，比如吃喝嫖赌，满口污言秽语。但是，他清楚在权力的游戏中存活不易，“死个国王跟死只苍蝇没两样”，却一生都在追求真实、荣誉和爱情，差点为此失去生命。</p>
<p>而在所有的愿望背后，他毕生的目标和执念，都是为了得到父亲泰温·兰尼斯特的承认。</p>
<p>在这个过程里，他历尽艰辛。但，结果呢？</p>
<p>他努力寻求承认，<br>但父亲只会给他侮辱和打击</p>
<p>不管从哪个方面看，提利昂·兰尼斯特都不像兰尼斯特家的人。</p>
<p>兰尼斯特家族血统高贵，享有权势，外形也是出了名的高大貌美、金发白肤，他却生来是个面貌丑陋的侏儒。在七大王国，侏儒是最低等的生物，通常只能做供人逗乐的杂耍卖艺小丑。</p>
<p>提利昂的父亲泰温是凯岩城公爵，美貌的姐姐嫁给了国王，英俊的哥哥当上了御林铁卫，但由于提利昂天生畸形，母亲又是在生他时难产而死，父亲怀疑他是私生子，因此对他非常冷漠和厌恶。</p>
<p><b>他是兄弟姐妹中最聪明的，却一直是那个没有话语权的、被忽视的儿子。</b></p>
<p>提利昂在剧中的第一次亮相并不体面。他和哥哥姐姐一起，随国王去临冬城的史塔克家拜访，到了临冬城，他不去参加欢迎仪式，第一件事就是去妓院里喝酒、找妓女。</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3vxxtm09j20hs0jhnby.jpg" alt=""></p>
<p>他放荡不羁的行为作风流传很广，人们不仅叫他“半人”，还给他起了个外号叫“小恶魔”，并嘲笑他说，“人丑只能找妓女”，“你（找妓女）那不叫‘捕猎’（hunting），‘捕猎’说的是不花钱的”。</p>
<p>但在玩世不恭的外表下，他很早就清楚地明白，自己需要用聪明的头脑来弥补身体的残缺。他希望通过自己的努力能够有所建树，来改变被忽视和嘲笑的命运。</p>
<p>和崇尚武力的其他贵族子弟相比，他博览群书，总是虚心向有学问的人请教。当被问到为什么总是看书时，他回答说，人丑就要多读书：</p>
<p>“如你所见，我是个侏儒，若是生在农夫之家，可能会被丢弃在森林里自生自灭，可惜我生在凯岩城兰尼斯特家族，总得为家族的荣誉做点贡献。我清楚地知道自己的长处和短处在哪里，老哥有他的宝剑，国王有他的战斧，我则有我的大脑。好脑筋需要书本，如同宝剑需要磨刀石。”</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3w10l5l9j20hs0j8qfl.jpg" alt=""></p>
<p>他的性格也与家族的其他人不同。家族奉行“兰尼斯特有债必还”的冷酷信条，父亲就是绝佳的践行者。但他却违抗不了善良的天性，天生残缺的他对弱者抱有同情，即便他们是兰尼斯特的敌人：残疾的布兰，私生子琼恩，被自己的外甥羞辱的珊莎。他总是忍不住为他们说公道话。哥哥詹姆甚至会怀疑地问他，你到底是不是兰尼斯特家的人？</p>
<p>当同为贵族私生子的琼恩因为自己的身份感到痛苦时，他好心劝他，“永远不要忘记自己的身份，因为全世界都不会忘记。要把弱点变成你的铠甲，用来武装自己，就没有人可以用它来伤害你。”</p>
<p>他还自嘲说，你只是私生子，比我的命好；我不仅被看做私生子，还是个侏儒。“全天下的侏儒，在他们的父亲眼里都和私生子没什么两样，但私生子却未必要被人视作侏儒。”</p>
<p>琼恩决定摆脱家族的阴影，前往绝境长城加入守夜人军团。他鼓励琼恩说，“去当守夜人也挺好的，抛弃旧家庭，迎来新家庭。”</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3w22grhdj20hs0bmgry.jpg" alt=""></p>
<p>凭借天赋和勤奋，提利昂屡次大难不死。被绑架到鹰巢城后，他利用智慧，赢得本来毫无胜算的武斗；在凶险的路途上，他对原住民部落头领进行了成功的游说，在他们的护送下终于抵达父亲的军队大营。</p>
<p>父亲见到他，并没有对他的安全归来表现出惊喜，第一句话是，“我听说你死了，看来传言不攻自破”。</p>
<p>提利昂回答说，“很抱歉，（我没死，）让你失望了。”</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3w4hcfq0j20hs08hdgt.jpg" alt=""></p>
<p>父亲非但不关心他，还再一次将他和英俊勇敢的哥哥詹姆比较，说如果是哥哥，绝不会像他这样轻易地被俘虏。</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3w5urrgnj20hs08naeo.jpg" alt=""></p>
<p>作为家庭里最清醒的人，尽管不受待见，提利昂总是帮助家族度过难关。他和愚蠢的姐姐、外甥的关系非常糟，并长期被他们看不起，但他依然每次都在他们做错事的时候，帮兰尼斯特家族擦屁股。</p>
<p>在家族最需要他的时候——史坦尼斯的军队攻到君临城下，父亲、哥哥都不在城内，他扛起了保卫家族的重任，担当御前首相、作战总指挥。黑水河一战，他用野火烧掉了史坦尼斯的大半船只，巧用计谋保住了君临不被攻破。当敌人的剩余部队杀到城下，士气濒临崩溃时，他成功地鼓舞了城内的军队，并亲自出城带领军队作战。</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3w6q5dl0j20hs0pv18l.jpg" alt=""></p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3w7lqrbdj20hs08e79n.jpg" alt=""></p>
<p>在战争的最后阶段，提利昂到达了他人生的辉煌时刻，战士们呼喊着“‘半人’万岁”。就在此时，他被一刀劈中头部，昏死过去。</p>
<p>当他从重伤中醒来时，等待他的不是荣誉和奖赏。战役虽然大获全胜，但在战役的尾声赶来的父亲抢走了所有的功劳，也抢走了他的御前首相一职，并将他关在阁楼。</p>
<p>他的努力又白费了——所有人都在御前领赏时，被削除官职的提利昂独自在阴暗的阁楼中承受嘲笑，他得到的，只是面部又多了一道吓人的伤疤。</p>
<p>有些事情，是再努力也改变不了的</p>
<p>就像在战争结束后的遭遇一样，尽管提利昂用尽了全力，却从来都只会得到父亲的侮辱和打击。而压垮他的最后一根稻草，是另一件对他来说至关重要的事——爱情。</p>
<p>尽管喜欢找妓女，但他从来没有放弃过追求真正的爱情，这也是为什么，当父亲把美貌的珊莎许配给他为妻时，他虽然好色，嘴上说着“我是怪物，所以你得小心点”，却一直没有碰珊莎一下，因为他知道珊莎不可能爱他。（可惜，在“权力的游戏”中，一个人如果勇敢追求爱情，结局都好不到哪里去）</p>
<p>冷血的父亲一心想让珊莎早点生下提利昂的儿子，这使他和父亲爆发了一次严重的冲突。提利昂拒绝了父亲的要求，说，“我不会强奸她的。”</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3w8nqapgj20hs08zq6f.jpg" alt=""></p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3wb443x5j20hs08i427.jpg" alt=""></p>
<p>父亲用家族利益至高无上作为理由，教育他不要只顾个人私欲。他则反问父亲：你什么时候做过不为个人私欲，只考虑家族利益的事？</p>
<p>父亲的回答令他震惊：“你出生的那天。我想把你扔到海边，任由海浪冲走。但我没有，我让你活了下来，并将你当做自己的儿子一样养育。”</p>
<p>然后父亲走开了，留他一个人呆立着。</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3wc8lc2uj20hs0gdn4u.jpg" alt=""></p>
<p>提利昂仅有的两段爱情，都是被他的父亲亲手毁掉的。</p>
<p>他的第一段爱情发生在年少时。他和一个叫泰莎的女孩情投意合，同居并结了婚。结果父亲谎称泰莎是个妓女，不但叫人当着提利昂的面轮奸泰莎，还逼提利昂在最后强奸了她，然后将女孩赶走。在那之后，父亲还经常拿“那个妓女”的故事来嘲笑提利昂。</p>
<p>多年后，哥哥詹姆才告诉他，那个女孩并不是妓女，这只是父亲编出来的谎言。</p>
<p>提利昂的第二段爱情，是在军营中爱上了妓女雪伊，她答应做他的专属情人。提利昂秘密地将雪伊带回到皇宫中，梦想着和雪伊一起结婚生孩子。</p>
<p>又是自己的父亲，在亲手判自己死刑的同时，也判了这段爱情死刑。</p>
<p>第四季的“审判大会”一集，被评为全剧最精彩的分集之一，也是提利昂与父亲冲突的爆发。当提利昂被自己的姐姐指证为谋杀外甥的凶手时，父亲亲自主持了对他的审判，并制造了各种证人和证据，一意要将提利昂置于死地。那些他曾经帮助过、给予过善意的人，都反过来诬陷他。</p>
<p>令他震惊的是，父亲竟然收买了自己的爱人雪伊，充当最后一名证人。雪伊在众人面前，以提利昂的情妇身份，作证提利昂与珊莎一起策划了谋杀，为了篡夺王位，以及帮珊莎报仇、讨她欢心，因为珊莎不愿意与他发生关系。</p>
<p>她还哽咽着叙述了提利昂如何“霸占”自己，逼她做“说不出口的事”，将她当做自己的财产的全过程。</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3wd3lp9bj20hs0mewv6.jpg" alt=""></p>
<p>她将自己曾经自愿说出的情话，包括对他的称呼“我的雄狮”、“我的兰尼斯特巨人”（提利昂一直很喜欢的称呼）都当众说出来羞辱他，并声称一切都是提利昂逼她做的。</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3wexc3jij20hs0jj4cf.jpg" alt=""></p>
<p>提利昂彻底被击垮了。他低头向父亲认罪。</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3wg0ag4aj20hs0aa79h.jpg" alt=""></p>
<p>当父亲问他，是否承认自己谋害了国王时，他回答说：</p>
<p>“是的，父亲，我有罪。这就是你想要听到的吧？我的罪远远超过谋害国王。我犯的是更可怕的罪。我被生了出来。我活在了shi’shang我的罪在于生而为侏儒。我的一生都在因此而受到审判。”</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3wgwhg7xj20hs0hz138.jpg" alt=""></p>
<p>他终于意识到，自己永远都不可能获得父亲的承认和喜爱，也永远不可能名正言顺地成为一名骑士，不可能继承凯岩城。</p>
<p>就像他当年劝说琼恩的那样，他决心离开自己的家庭。他从监狱里逃了出来，在离开君临前来到父亲的房间，却发现雪伊躺在父亲的床上。</p>
<p>盛怒之下的他，毫不犹豫地拿刀杀死了雪伊，自己曾经最心爱的人。</p>
<p>随后，他找到正在上厕所的父亲，抬起弓箭对准自己的父亲——连发两箭，杀死了他。在父亲临死之前，他说，“我永远是你的儿子。”</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3wht0xrxj20hs08rwhk.jpg" alt=""></p>
<p>作者乔治·马丁曾经这样解释这一段情节：“当提利昂去到那里（父亲的房间）时，他还并不知道自己要说什么、做什么。是一部分的他自己，迫使他做出了那样的行为（弑父）。”</p>
<p>提利昂离开君临，过上了颠沛流离的逃亡生活，他活得很艰难，为了升级给人表演杂耍。</p>
<p>最终，他选择远渡重洋，去投奔与自己家族有血仇的龙女王。当年，正是自己的哥哥詹姆·兰尼斯特杀害了龙女的父亲、曾经的国王，帮助篡夺了皇位。</p>
<p>可想而知，这并不是一条多么容易的道路。但无论如何，他终于彻底背离了自己的家族，开始为自己而活。</p>
<p><img src="http://ww3.sinaimg.cn/large/a6d02addgy1fe3wiqexr8j20dw08pgoy.jpg" alt=""></p>
<p>上面这张《权力的游戏》海报是我特别喜欢的一张。这个背影也让我想到在书中，提利昂第一次出现时作者的描述（鉴于作品中的每一句话都内含深意，这句话也不禁使人对之后的情节发展产生遐想）：</p>
<p>“他转过身，驼着背返回宴会大厅，嘴里还哼起一首爱情小调。当他打开门的一刹那，室内的灯光将他的背影清楚地洒在庭院中。就在那一瞬间，提利昂·兰尼斯特的身影宛如帝王般昂首挺立。”</p>
<p>在《冰与火之歌》这部奇幻作品中，人与人之间的冷酷、阴谋，人性中的黑暗面都被放大了，除了权力的游戏，一切都是浮云。然而，去掉王国、贵族、侏儒、杀戮与死亡的设定，提利昂就是一个普通人，他的性格复杂而充满温情，他像所有想获得父亲的喜爱、但却被冷漠和粗暴对待的孩子一样，始终想要摆脱命运的束缚，得到父亲的承认。</p>
<p>但是，就像剧中提利昂的命运，有时候，我们可能倾尽全力，也无法在自己的家庭中得到想要的东西——关心、爱、尊重……因为我们永远无法改变他人，即便那个人是你的父/母亲。如果一味地坚持下去，只会陷入执念中不能自拔。</p>
<p>这时，对一部分人来说，也许只能选择离开，跳出那个令你痛苦的环境，完成精神上的“弑父”——并不是说要真实地伤害他们，或者与他们决裂——而是在精神上与家庭脱离，不再用他们的眼睛审视自己的人生，不再用他们的标准来要求自己。也许只有这样，你才能真正开启属于你自己的人生。</p>
<p>希望每个困于原生家庭的孩子都能找到自己的道路，这个过程不一定要像提利昂·兰尼斯特那么激烈。以上。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://ronghuaxu.github.io/index.html/2017/02/13/自动问答系统/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="华子">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我就是我,是不一样的烟火">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/13/自动问答系统/" itemprop="url">
                  微信基于电信业务的自动问答系统 (微信公众号的开发)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-13T16:01:21+08:00">
                2017-02-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本系统使用lucene的全文检索引擎工具包和基于java语言开发的轻量级的中文分词工具包IK Analyzer,来分析用户对微信平台的提问,并从数据库中检索出最匹配的问题,如果精确度够高,就直接返回对应数据库中该问题的答案,如果精确度属于中等阈值,系统会给用户提示一些较相似的问题提示用户输入更精确的问题.如果阈值偏低,则默认用户的问题过于复杂,系统给予友好提示等.</p>
<h2 id="系统准备"><a href="#系统准备" class="headerlink" title="系统准备"></a>系统准备</h2><p>1.Git and JDK 6 update 20 or later<br>2.mysql 5.5 or later</p>
<h2 id="系统配置修改"><a href="#系统配置修改" class="headerlink" title="系统配置修改"></a>系统配置修改</h2><p>配置修改:<br>wechat4j.properties<br>    you server url<br>wechat.url=<a href="http://inc.dareyan.cn/" target="_blank" rel="external">http://inc.dareyan.cn/</a><br>    you wechat token<br>wechat.token=xurh<br>    message secret key,if don’t set then message is cleartext<br>wechat.encodingaeskey=<strong>**</strong><br>    wechat appid<br>wechat.appid=<strong>**</strong><br>    wechat app secret<br>wechat.appsecret=<strong>**</strong><br>数据库配置:<br>db/DBHelper.java<br><code>public static final String URL = &quot;jdbc:mysql://127.0.0.1/tmp_grad?characterEncoding=UTF-8&quot;;</code></p>
<p><code>public static final String NAME = &quot;com.mysql.jdbc.Driver&quot;;</code></p>
<p>  <code>public static final String USER = &quot;root&quot;;</code></p>
<p>   <code>public static final String PASSWORD = &quot;123qwe,./&quot;;</code></p>
<h2 id="项目地址"><a href="#项目地址" class="headerlink" title="项目地址"></a>项目地址</h2><p><a href="https://github.com/ronghuaxu/wechat" target="_blank" rel="external">github开源地址</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://ronghuaxu.github.io/index.html/2016/09/27/Scrapy起步/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="华子">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我就是我,是不一样的烟火">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/27/Scrapy起步/" itemprop="url">
                  Scrapy爬取知乎用户信息以及人际拓扑关系
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-09-27T16:29:15+08:00">
                2016-09-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="生成项目"><a href="#生成项目" class="headerlink" title="生成项目"></a>生成项目</h2><p>scrapy提供一个工具来生成项目，生成的项目中预置了一些文件，用户需要在这些文件中添加自己的代码。 打开命令行，执行：scrapy startproject tutorial，生成的项目类似下面的结构  </p>
<pre>
tutorial/  
   scrapy.cfg  
   tutorial/  
    __init__.py  
       items.py  
       pipelines.py  
       settings.py  
       spiders/  
           __init__.py   
 </pre>

<h2 id="源码分析"><a href="#源码分析" class="headerlink" title="源码分析"></a>源码分析</h2><h3 id="文件成员介绍"><a href="#文件成员介绍" class="headerlink" title="文件成员介绍"></a>文件成员介绍</h3><h4 id="items-py-类需要继承-scrapy-Item-爬取的主要目标就是从非结构性的数据源提取结构性数据，例如网页。-Scrapy提供Item类来满足这样的需求。-该项目中定义了在爬取元素构造的知乎用户属性和知乎用户关系两大块Item-为爬取后的数据转化为结构性数据-同时-也为后面的持久化做准备"><a href="#items-py-类需要继承-scrapy-Item-爬取的主要目标就是从非结构性的数据源提取结构性数据，例如网页。-Scrapy提供Item类来满足这样的需求。-该项目中定义了在爬取元素构造的知乎用户属性和知乎用户关系两大块Item-为爬取后的数据转化为结构性数据-同时-也为后面的持久化做准备" class="headerlink" title="items.py  :类需要继承 scrapy.Item,爬取的主要目标就是从非结构性的数据源提取结构性数据，例如网页。 Scrapy提供Item类来满足这样的需求。 该项目中定义了在爬取元素构造的知乎用户属性和知乎用户关系两大块Item,为爬取后的数据转化为结构性数据,同时,也为后面的持久化做准备."></a>items.py  :类需要继承 scrapy.Item,爬取的主要目标就是从非结构性的数据源提取结构性数据，例如网页。 Scrapy提供Item类来满足这样的需求。 该项目中定义了在爬取元素构造的知乎用户属性和知乎用户关系两大块Item,为爬取后的数据转化为结构性数据,同时,也为后面的持久化做准备.</h4><h4 id="pipelines-py-当Item在Spider中被收集之后，它将会被传递到Item-Pipeline，一些组件会按照一定的顺序执行对Item的处理。"><a href="#pipelines-py-当Item在Spider中被收集之后，它将会被传递到Item-Pipeline，一些组件会按照一定的顺序执行对Item的处理。" class="headerlink" title="pipelines.py  :当Item在Spider中被收集之后，它将会被传递到Item Pipeline，一些组件会按照一定的顺序执行对Item的处理。"></a>pipelines.py  :当Item在Spider中被收集之后，它将会被传递到Item Pipeline，一些组件会按照一定的顺序执行对Item的处理。</h4><p>每个item pipeline组件(有时称之为“Item Pipeline”)是实现了简单方法的Python类。他们接收到Item并通过它执行一些行为，同时也决定此Item是否继续通过pipeline，或是被丢弃而不再进行处理。</p>
<p>以下是item pipeline的一些典型应用：</p>
<ul>
<li>清理HTML数据</li>
<li>验证爬取的数据(检查item包含某些字段)</li>
<li>查重(并丢弃)</li>
<li>将爬取结果保存到数据库中<br>编写你自己的item pipeline<br>编写你自己的item pipeline很简单，每个item pipeline组件是一个独立的Python类，同时必须实现以下方法:</li>
</ul>
<p>process_item(self, item, spider)<br>每个item pipeline组件都需要调用该方法，这个方法必须返回一个 Item (或任何继承类)对象， 或是抛出 DropItem 异常，被丢弃的item将不会被之后的pipeline组件所处理。<br>该项目中就在该类中实现把数据持久化到mango数据库中</p>
<p>参数:<br>item (Item 对象) – 被爬取的item<br>spider (Spider 对象) – 爬取该item的spider  </p>
<pre>
import os

from pymongo import MongoClient
from zhihu.settings import MONGO_URI, PROJECT_DIR
from zhihu.items import ZhihuPeopleItem, ZhihuRelationItem
from zhihu.tools.async import download_pic


class ZhihuPipeline(object):
    """
    存储数据
    """
    def __init__(self, mongo_uri, mongo_db, image_dir):
        self.mongo_uri = mongo_uri
        self.mongo_db = mongo_db
        self.image_dir = image_dir
        self.client = None
        self.db= None
    def process_item(self, item, spider):
        """
        处理item
        """
        if isinstance(item, ZhihuPeopleItem):
            self._process_people(item)
        elif isinstance(item, ZhihuRelationItem):
            self._process_relation(item)
        return item
</pre>
2.1.3 settings.py :配置文件,提供爬虫系统参数的可配置化  
2.1.4 spiders : 这个是一个包,可以定制自己的爬虫代码.如ZhihuSipder这个类就是知乎爬虫的启动类.
###  技术要点
####2.2.1 CrawlSpider  
这里采用CrawlSpider,这个继承了Spider的且,非常适合做全站数据爬取的类.
<pre>
class ZhihuSipder(CrawlSpider):
    name = "zhihu"
    allowed_domains = ["www.zhihu.com"]
    start_url = "https://www.zhihu.com/people/hua-zi-xu-95"
</pre>
简析上面的三个参数:
1.name:这个参数是每个自定义爬虫必须要有的,唯一辨别你的自定义爬虫,name当然也是使用命令启动爬虫的一个决定因素.启动命令:scrapy crawl zhihu,其中的zhihu就是name属性.
2.allowed_domains:链接中必须包含的域名.
3.start_url:爬虫的入口地址,这里就是以我本人的知乎主页为入口.
2.2.2 FormRequest做登陆模块
<pre>
from scrapy.http import Request, FormRequest
    def post_login(self, response):
        """
        解析登陆页面，发送登陆表单
        """
        self.xsrf = Selector(response).xpath(
            '//input[@name="_xsrf"]/@value'
        ).extract()[0]
        return [FormRequest(
            'https://www.zhihu.com/login/email',
            method='POST',
            meta={'cookiejar': response.meta['cookiejar']},
            formdata={
                '_xsrf': self.xsrf,
                'email': 'xxxxxxxxx',
                'password': 'xxxxxxxxx',
                'remember_me': 'true'},
            callback=self.after_login
        )]
</pre>
2.2.3 Requests and Responses
Scrapy使用 Request 和 Response 对象爬取web站点。

一般来说，Request 对象在spiders中被生成并且最终传递到 下载器(Downloader)，下载器对其进行处理并返回一个 Response 对象， Response 对象还会返回到生成request的spider中。

所有 Request and Response 的子类都会实现一些在基类中非必要的 功能。它们会在 Request subclasses 和 Response subclasses 两部分进行详细的说明。
下面是Request构造函数
<pre>
class Request(object_ref):
    def __init__(self, url, callback=None, method='GET', headers=None, body=None,
                 cookies=None, meta=None, encoding='utf-8', priority=0,
                 dont_filter=False, errback=None):
        self._encoding = encoding  # this one has to be set first
        self.method = str(method).upper()
        self._set_url(url)
        self._set_body(body)
        assert isinstance(priority, int), "Request priority not an integer: %r" % priority
       self.priority = priority
        assert callback or not errback, "Cannot use errback without a callback"
        self.callback = callback
        self.errback = errback
        self.cookies = cookies or {}
        self.headers = Headers(headers or {}, encoding=encoding)
        self.dont_filter = dont_filter
        self._meta = dict(meta) if meta else None
</pre>

<p>特别注意:参数:dont_filter<br>dont_filter(boolean) – indicates that this request should not be filtered by the scheduler. This is used when you want to perform an identical request multiple times, to ignore the duplicates filter. Use it with care, or you will get into crawling loops. Default to False.<br>解释:scrapy url去重  Request对象参数的dont_filter=False,默认就是false 如程序所示,默认就是要进行url去重<br>show code:</p>
<p><pre><br>    def enqueue_request(self, request):<br>    //核心判断 注意  not 取否<br>        if not request.dont_filter and self.df.request_seen(request):<br>            self.df.log(request, self.spider)<br>            return False<br>        dqok = self._dqpush(request)<br>        if dqok:<br>            self.stats.inc_value(‘scheduler/enqueued/disk’, spider=self.spider)<br>        else:<br>            self._mqpush(request)<br>            self.stats.inc_value(‘scheduler/enqueued/memory’, spider=self.spider)<br>        self.stats.inc_value(‘scheduler/enqueued’, spider=self.spider)<br>        return True<br></pre><br>ps:  scrapy 中判断重复内容的方法(RFPDupeFilter)</p>
<h2 id="源码地址"><a href="#源码地址" class="headerlink" title="源码地址"></a>源码地址</h2><p><a href="https://github.com/ronghuaxu?tab=stars" target="_blank" rel="external">github地址</a><br>该目录下的知乎爬虫项目,即可下载源码.</p>
<h2 id="每日推荐"><a href="#每日推荐" class="headerlink" title="每日推荐"></a>每日推荐</h2><p>linux下命令窗口分配显示一遍查看使用说明,一般敲代码.        软件名:  tmux<br>效果图:<br><img src="http://blog.chinaunix.net/attachment/201206/26/26285146_1340683779Di02.png" alt="效果图"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://ronghuaxu.github.io/index.html/2016/09/23/IMovie使用教程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="华子">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我就是我,是不一样的烟火">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/23/IMovie使用教程/" itemprop="url">
                  IMovie使用教程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-09-23T16:55:34+08:00">
                2016-09-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/IMovie/" itemprop="url" rel="index">
                    <span itemprop="name">IMovie</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="IMovie快速入门"><a href="#IMovie快速入门" class="headerlink" title="IMovie快速入门"></a>IMovie快速入门</h2><p><a href="http://help.apple.com/imovie/mac/10.1/" target="_blank" rel="external">苹果官网IMovie介绍</a><br><img src="https://ww3.sinaimg.cn/large/006tNc79gy1fe5zs5ece1j31kw0ymaki.jpg" alt=""></p>
<h2 id="什么是-iMovie？"><a href="#什么是-iMovie？" class="headerlink" title="什么是 iMovie？"></a>什么是 iMovie？</h2><p>通过 iMovie，您可以在 Mac 上查看、编辑和共享影片。</p>
<h3 id="浏览项目"><a href="#浏览项目" class="headerlink" title="浏览项目"></a>浏览项目</h3><p>“项目”视图可让您直接访问资源库中的所有影片项目。<br><img src="http://help.apple.com/imovie/mac/10.1/zh_CN.lproj/Art/S0002_ProjectPane.png" alt=""></p>
<h3 id="编辑影片"><a href="#编辑影片" class="headerlink" title="编辑影片"></a>编辑影片</h3><p>您可以从资源库查看和添加片段、编辑影片、以及添加音乐和效果。<br><img src="http://help.apple.com/imovie/mac/10.1/zh_CN.lproj/Art/S0001_iMovieFullCallouts.png" alt=""></p>
<h3 id="共享影片"><a href="#共享影片" class="headerlink" title="共享影片"></a>共享影片</h3><p>影片制作完成后，您可以在 iMovie Theater 中观看、将影片共享到 iTunes 或将影片共享到网上。<br><img src="http://help.apple.com/imovie/mac/10.1/zh_CN.lproj/Art/S0509_TheaterProjects.png" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://ronghuaxu.github.io/index.html/2016/09/23/java并发编程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="华子">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我就是我,是不一样的烟火">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/23/java并发编程/" itemprop="url">
                  java并发编程读书笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-09-23T16:55:34+08:00">
                2016-09-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="线程安全性"><a href="#线程安全性" class="headerlink" title="线程安全性"></a>线程安全性</h2><p>内置锁: synchronized<br>重入 :子类加锁函数调用父类同样函数可以调用,说明发生了重入,判断含有锁==1,可以往上叠加变为2  </p>
<h3 id="原子性"><a href="#原子性" class="headerlink" title="原子性"></a>原子性</h3><p>servlet中增加一个long类型都域,命中计数器都值会出现偏差,缺乏原子性</p>
<h3 id="竞态条件"><a href="#竞态条件" class="headerlink" title="竞态条件"></a>竞态条件</h3><p>诠释:由于不恰当的执行时序而出现的不正确都结果是一种非常重要的情况.<br>两家星巴克 朋友之间互相寻找对方,当A朋友从1店起身找B时,B刚好从2店出来进入1店找A</p>
<h3 id="活跃性和性能"><a href="#活跃性和性能" class="headerlink" title="活跃性和性能"></a>活跃性和性能</h3><p>servlet中命中计数器使用同步块代码来实现计数原子性<br>解决:应该尽量将不影响共享状态且执行时间较长都操作从代码同步块中分离出去,从而在这些操作的执行过程中,其他线程可以访问共享状态.</p>
<h2 id="对象的共享"><a href="#对象的共享" class="headerlink" title="对象的共享"></a>对象的共享</h2><h3 id="可见性"><a href="#可见性" class="headerlink" title="可见性"></a>可见性</h3><p><a href="http://aswang.iteye.com/blog/1744230" target="_blank" rel="external">代码请点此处</a>  </p>
<h3 id="过期数据"><a href="#过期数据" class="headerlink" title="过期数据"></a>过期数据</h3><p>当线程读取某个变量时,这个变量可能是一个过期的值,除非每一次访问的变量都是同步的<br>同步化setter是不够的,调用get的线程仍然看得到过期值</p>
<h3 id="非原子的64位操作"><a href="#非原子的64位操作" class="headerlink" title="非原子的64位操作"></a>非原子的64位操作</h3><p>long double数据 64伟,jvm允许将64的读或写划分为32位的操作.你可能会得到一个值的高32位和另一个值的低32位.</p>
<h3 id="锁和可见性"><a href="#锁和可见性" class="headerlink" title="锁和可见性"></a>锁和可见性</h3><p>同一个代码块中加锁,可以保证线程间对代码块中的数据改动是可见的,如果没有同步,就没有这样的保证.</p>
<h3 id="Volatile变量"><a href="#Volatile变量" class="headerlink" title="Volatile变量"></a>Volatile变量</h3><p>访问volatile的操作不会加锁,也就不会发生引起执行线程的阻塞,故,volatile只是轻量级的同步机制.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://ronghuaxu.github.io/index.html/2016/09/23/致加西亚的一封信/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="华子">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我就是我,是不一样的烟火">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/23/致加西亚的一封信/" itemprop="url">
                  致加西亚的一封信
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-09-23T16:55:34+08:00">
                2016-09-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/读后感/" itemprop="url" rel="index">
                    <span itemprop="name">读后感</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://onnzi1irx.bkt.clouddn.com/s7031685.jpg" alt=""></p>
<h2 id="剧情描述-临危受命"><a href="#剧情描述-临危受命" class="headerlink" title="剧情描述,临危受命"></a>剧情描述,临危受命</h2><p>当罗文接受了”给加西亚送信”的任务,他静静地接过信,不问任何的问题,更不会将信揉成团,然后扔到下水道去.他在前往古巴的途中,因为战争的原因,他经历的困难重重.当然,也碰到了一些罗文本人未知的但是事先安排好的一些队友,这些队友我认为在他的行程中发挥着至关重要的作用.这些给力的队友就好比克莱儿·麦克福尔的著名小说《摆渡人》中的一个个勇敢且善良的摆渡人.</p>
<h2 id="故事概述-过三关斩六将"><a href="#故事概述-过三关斩六将" class="headerlink" title="故事概述,过三关斩六将"></a>故事概述,过三关斩六将</h2><h3 id="第一段历程"><a href="#第一段历程" class="headerlink" title="第一段历程"></a>第一段历程</h3><p>第一段历程: 从陆地赶到海湾,他遇到了第一个摆渡人,马夫,马夫是一个不善于言谈的人,他在旅途中没有和罗文交谈,即使罗文主动找他谈话,他也不理睬罗文.他不断的快马加鞭,当罗文被路途中的黑人免费送上香喷喷的炸鸡和啤酒诱惑时,罗文当时心里按捺不住,可是马夫对所见无动于衷,他视而不见,马夫却更狠地抽打着马,加速结束了这场不该有的意外,为信件的尽快送达省下了时间.马夫的行为在罗文的眼中即使是那么不可理解,不可交流,但是他仍然没有撕破脸皮,强忍住美食的诱惑.</p>
<h3 id="第二段历程"><a href="#第二段历程" class="headerlink" title="第二段历程"></a>第二段历程</h3><p>第二段历程: 跨越大海,他遇到了第二个摆渡人吉尔瓦西奥(西班牙人),他们坐的是一艘货船,清晨,他们在海上碰到了敌军船(西班牙),罗文当时有点慌乱,觉得大难临头;而吉尔瓦西奥安排船上的所有人都躲进船舱,除了他自己.当敌船靠近时,吉尔瓦西奥淡定地回复了敌方将领的提问,顺利地把自己伪装成了一个牙买加地渔夫.如果被逮捕,不仅意味着个人的牺牲,任务也无法完成.第二个危难在靠近海岸还有50英里的时候,当罗文觉得隐蔽的海湾和朦胧的月色很适合上岸时,吉尔瓦西奥提出反对,在他的一些很具体的分析过后,欧文改变了自己原先的计划.罗文没有感到反感,而是愿意认真听完吉尔瓦西奥的分析,更难能可贵的是他及时改变策略,也减少了很多危险.</p>
<h3 id="第三段历程"><a href="#第三段历程" class="headerlink" title="第三段历程"></a>第三段历程</h3><p>第三段历程:陆地骑行,第三个摆渡人格瓦西奥.上岸后,罗文和他的搭档遇到了突袭,失去了唯一的交通工具马匹,罗文在队友寻找马匹和马鞍的过程中,几乎失去了耐心,罗文提议徒步前进,但是格瓦西奥则冷静地否定了他的这个建议.因为战争的原因,他们的必须绕远路,步行是很愚蠢.</p>
<h2 id="三段历程结合现实生活的结论"><a href="#三段历程结合现实生活的结论" class="headerlink" title="三段历程结合现实生活的结论:"></a>三段历程结合现实生活的结论:</h2><h3 id="如何抱大腿"><a href="#如何抱大腿" class="headerlink" title="如何抱大腿"></a>如何抱大腿</h3><p>现实工作生活中充满着无数诱惑,往往会带你走向弯路,但是有个优秀的人在前面领着你走,记得卸下自己的架子,欲望,跟大神一起前行,方能马到成功.</p>
<h3 id="临危不惧"><a href="#临危不惧" class="headerlink" title="临危不惧"></a>临危不惧</h3><p>现实生活中也会遇到很多突发的困难和挑战,临危不惧方能转危为安.</p>
<h3 id="虚心纳谏方可贞观盛世"><a href="#虚心纳谏方可贞观盛世" class="headerlink" title="虚心纳谏方可贞观盛世"></a>虚心纳谏方可贞观盛世</h3><p>现实生活中,当自己的想法和亲人,朋友,同学发生冲突时,切勿个人主义,虚心纳谏可能别人说的不一定全对,但是至少给关心你的人一个表达他对你建议的时间.听他讲完,再做决定也不迟.</p>
<h3 id="学会变通"><a href="#学会变通" class="headerlink" title="学会变通"></a>学会变通</h3><p>现实生活中,对于提议者,可以学着用变通的方法让对方听进你的建议,格瓦西奥用冷静面对不耐烦的罗文,而不是用严肃或者命令式的口吻,或许换个方式表达你的建议,可以达到事半功倍的效果.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://ronghuaxu.github.io/index.html/2016/09/07/webmagic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="华子">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我就是我,是不一样的烟火">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/07/webmagic/" itemprop="url">
                  Webmagic学习总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-09-07T15:09:05+08:00">
                2016-09-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="WebMagic概览"><a href="#WebMagic概览" class="headerlink" title="WebMagic概览"></a>WebMagic概览</h2><p>WebMagic项目代码分为核心和扩展两部分。核心部分(webmagic-core)是一个精简的、模块化的爬虫实现，而扩展部分则包括一些便利的、实用性的功能。WebMagic的架构设计参照了Scrapy，目标是尽量的模块化，并体现爬虫的功能特点。</p>
<p>这部分提供非常简单、灵活的API，在基本不改变开发模式的情况下，编写一个爬虫。</p>
<p>扩展部分(webmagic-extension)提供一些便捷的功能，例如注解模式编写爬虫等。同时内置了一些常用的组件，便于爬虫开发。</p>
<p>另外WebMagic还包括一些外围扩展和一个正在开发的产品化项目webmagic-avalon。</p>
<h2 id="核心组件"><a href="#核心组件" class="headerlink" title="核心组件"></a>核心组件</h2><h3 id="结构图"><a href="#结构图" class="headerlink" title="结构图"></a>结构图</h3><p><img src="http://code4craft.github.io/images/posts/webmagic.png" alt="webmagic"></p>
<h3 id="四大组件"><a href="#四大组件" class="headerlink" title="四大组件"></a>四大组件</h3><ul>
<li>1.Downloader:下载器</li>
<li>2.PageProcessor:抽取器</li>
<li>3.Scheduler:调度器</li>
<li>4.Pipeline:结果处理器</li>
</ul>
<h2 id="源码分析-主类Spider"><a href="#源码分析-主类Spider" class="headerlink" title="源码分析(主类Spider)"></a>源码分析(主类Spider)</h2><h3 id="各组件初始化及可扩展"><a href="#各组件初始化及可扩展" class="headerlink" title="各组件初始化及可扩展"></a>各组件初始化及可扩展</h3><h4 id="初始化Scheduler"><a href="#初始化Scheduler" class="headerlink" title="初始化Scheduler"></a>初始化Scheduler</h4><p>初始化Scheduler:(默认QueueScheduler)<br><code>protected Scheduler scheduler = new QueueScheduler();</code></p>
<p>采用新的Scheduler:</p>
<pre>
public Spider setScheduler(Scheduler scheduler) {
        checkIfRunning();
        Scheduler oldScheduler = this.scheduler;
        this.scheduler = scheduler;
        if (oldScheduler != null) {
            Request request;
            while ((request = oldScheduler.poll(this)) != null) {
            //复制原来的url到新的scheduler
                this.scheduler.push(request, this);
            }
        }
        return this;
    }
</pre>

<h4 id="初始化Downloader"><a href="#初始化Downloader" class="headerlink" title="初始化Downloader"></a>初始化Downloader</h4><p>初始化Downloader:(默认HttpClientDownloader)</p>
<pre>
 protected void initComponent() {
        if (downloader == null) {
        //用户没有自定义Downloader,默认为HttpClientDownloader()
            this.downloader = new HttpClientDownloader();
        }
        if (pipelines.isEmpty()) {
        //用户没有自定义Pipeline,默认为ConsolePipeline()
            pipelines.add(new ConsolePipeline());
        }
        downloader.setThread(threadNum);
        if (threadPool == null || threadPool.isShutdown()) {
               //自定义线程池
            if (executorService != null && !executorService.isShutdown()) {
                threadPool = new CountableThreadPool(threadNum, executorService);
            } else {
                threadPool = new CountableThreadPool(threadNum);
            }
        }
        if (startRequests != null) {
            for (Request request : startRequests) {
                scheduler.push(request, this);
            }
            startRequests.clear();
        }
        startTime = new Date();
    }  </pre>

<h4 id="初始化Pipeline"><a href="#初始化Pipeline" class="headerlink" title="初始化Pipeline"></a>初始化Pipeline</h4><p>初始化Pipeline:(默认ConsolePipeline)  </p>
<h4 id="初始化PageProcessor"><a href="#初始化PageProcessor" class="headerlink" title="初始化PageProcessor"></a>初始化PageProcessor</h4><p>初始化PageProcessor:(用户自定义完成,按需求抽取html)</p>
<h3 id="如何实现多线程"><a href="#如何实现多线程" class="headerlink" title="如何实现多线程"></a>如何实现多线程</h3><h4 id="初始化线程池"><a href="#初始化线程池" class="headerlink" title="初始化线程池"></a>初始化线程池</h4><p>(默认Executors.newFixedThreadPool(threadNum))<br>Executors.newFixedThreadPool作用:创建一个定长线程池，可控制线程最大并发数，超出的线程会在队列中等待.</p>
<pre>
 public CountableThreadPool(int threadNum) {
        this.threadNum = threadNum;
        this.executorService = Executors.newFixedThreadPool(threadNum);
    }
</pre>

<h4 id="多线程并发控制"><a href="#多线程并发控制" class="headerlink" title="多线程并发控制"></a>多线程并发控制</h4><pre>
public void execute(final Runnable runnable) {
        if (threadAlive.get() >= threadNum) {
            try {
                reentrantLock.lock();//同步锁  下面为保护代码块
                while (threadAlive.get() >= threadNum) {
                    try {
                        condition.await();
                    } catch (InterruptedException e) {
                    }
                }
            } finally {
                reentrantLock.unlock();
            }
        }
        threadAlive.incrementAndGet();
        executorService.execute(new Runnable() {
            @Override
            public void run() {
                try {
                    runnable.run();
                } finally {
                    try {
                        reentrantLock.lock();
                        threadAlive.decrementAndGet();
                        //线程数量减少一个时，通过signal()方法通知前面condition.await()的线程
                        condition.signal();
                    } finally {
                        reentrantLock.unlock();
                    }
                }
            }
        });
    }
</pre>

<h4 id="Java中的ReentrantLock和synchronized两种锁定机制的对比"><a href="#Java中的ReentrantLock和synchronized两种锁定机制的对比" class="headerlink" title="Java中的ReentrantLock和synchronized两种锁定机制的对比"></a>Java中的ReentrantLock和synchronized两种锁定机制的对比</h4><blockquote>
<p>ReentrantLock默认情况下为不公平锁</p>
<p><pre>private ReentrantLock lock = new ReentrantLock(); //参数默认false，不公平锁<br>private ReentrantLock lock = new ReentrantLock(true); //公平锁<br>        try {<br>            lock.lock(); //如果被其它资源锁定，会在此等待锁释放，达到暂停的效果<br>            //操作<br>        } finally {<br>            lock.unlock();<br>        }</pre><br>        不公平锁与公平锁的区别：<br>公平情况下，操作会排一个队按顺序执行，来保证执行顺序。（会消耗更多的时间来排队）<br>不公平情况下，是无序状态允许插队，jvm会自动计算如何处理更快速来调度插队。（如果不关心顺序，这个速度会更快）  </p>
</blockquote>
<h4 id="AtomicInteger-amp-amp-CAS"><a href="#AtomicInteger-amp-amp-CAS" class="headerlink" title="AtomicInteger &amp;&amp; CAS"></a>AtomicInteger &amp;&amp; CAS</h4><blockquote>
<p>AtomicInteger，一个提供原子操作的Integer的类。在Java语言中，++i和i++操作并不是线程安全的，在使用的时候，不可避免的会用到synchronized关键字。而AtomicInteger则通过一种线程安全的加减操作接口。<br>首先要说一下，AtomicInteger类compareAndSet通过原子操作实现了CAS操作，最底层基于汇编语言实现<br>CAS是Compare And Set的一个简称，如下理解：<br>1，已知当前内存里面的值current和预期要修改成的值new传入<br>2，内存中AtomicInteger对象地址对应的真实值(因为有可能别修改)real与current对比，相等表示real未被修改过，是“安全”的，将new赋给real结束然后返回；不相等说明real已经被修改，结束并重新执行1直到修改成功  </p>
</blockquote>
<h4 id="程序如何终止"><a href="#程序如何终止" class="headerlink" title="程序如何终止"></a>程序如何终止</h4><pre>
//while循环结束,则程序完成任务并终止
 while (!Thread.currentThread().isInterrupted() && stat.get() == STAT_RUNNING) {
            Request request = scheduler.poll(this);
            //当scheduler内目标URL为空时
            if (request == null) {
                //线程池中已经没有线程在运行了, exitWhenComplete默认为true
                if (threadPool.getThreadAlive() == 0 && exitWhenComplete) {
                    break;
                }
                // wait until new url added
                waitNewUrl();
            }
</pre>

<h3 id="HttpClient使用http连接池发送http请求"><a href="#HttpClient使用http连接池发送http请求" class="headerlink" title="HttpClient使用http连接池发送http请求"></a>HttpClient使用http连接池发送http请求</h3><p>将用户设置的线程数设置为httpclient最大连接池数</p>
<pre>
public void setThread(int thread) {
        httpClientGenerator.setPoolSize(thread);
    }
</pre>

<pre>
 public HttpClientGenerator setPoolSize(int poolSize) {
        // 将最大连接数增加为poolSize
        connectionManager.setMaxTotal(poolSize);
        return this;
    }
</pre>  

<h3 id="URL在Scheduler中去重"><a href="#URL在Scheduler中去重" class="headerlink" title="URL在Scheduler中去重"></a>URL在Scheduler中去重</h3><p>将下载结果页面中的链接抽取出来并放入scheduler中</p>
<pre>
 public void push(Request request, Task task) {
        logger.trace("get a candidate url {}", request.getUrl());
        if (!duplicatedRemover.isDuplicate(request, task) || shouldReserved(request)) {
            logger.debug("push to queue {}", request.getUrl());
            pushWhenNoDuplicate(request, task);
        }
    }
</pre>      

<h4 id="redischedulerURL去重复"><a href="#redischedulerURL去重复" class="headerlink" title="redischedulerURL去重复"></a>redischedulerURL去重复</h4><pre>boolean isDuplicate = jedis.sismember(getSetKey(task), request.getUrl());</pre>  

<pre>
//获得key值
protected String getSetKey(Task task) {
        return SET_PREFIX + task.getUUID();
    }
//生成唯一的UUID
public String getUUID() {
        if (uuid != null) {
            return uuid;
        }
        if (site != null) {
            return site.getDomain();
        }
        uuid = UUID.randomUUID().toString();
        return uuid;
    }


</pre>
<pre>
//RedisScheduler初始化方式,传入Redis的ip地址即可
public RedisScheduler(String host) {
//JedisPool使用JedisPoolConfig中默认的参数进行初始化
        this(new JedisPool(new JedisPoolConfig(), host));
    }

    public RedisScheduler(JedisPool pool) {
        this.pool = pool;
        setDuplicateRemover(this);
    }
</pre>


<p>RedisScheduler 中判断url是否重复的方法,因为一个Spider就是对应只有一个UUID,故上述的判断则是:判断当前的url是否是uuid集合的元素  </p>
<blockquote>
<p>System.out.println(jedis.sismember(“sname”, “minxr”));// 判断 minxr是否是sname集合的元素   </p>
</blockquote>
<h4 id="bloomFilter-URL去重复"><a href="#bloomFilter-URL去重复" class="headerlink" title="bloomFilter URL去重复"></a>bloomFilter URL去重复</h4><pre>boolean isDuplicate = bloomFilter.mightContain(getUrl(request));</pre>


<blockquote>
<p>Bloom-Filter，即布隆过滤器，1970年由Bloom中提出。它可以用于检索一个元素是否在一个集合中。<br>Bloom Filter（BF）是一种空间效率很高的随机数据结构，它利用位数组很简洁地表示一个集合，并能判断一个元素是否属于这个集合。它是一个判断元素是否存在集合的快速的概率算法。Bloom Filter有可能会出现错误判断，但不会漏掉判断。也就是Bloom Filter判断元素不再集合，那肯定不在。如果判断元素存在集合中，有一定的概率判断错误。因此，Bloom Filter不适合那些“零错误”的应用场合。而在能容忍低错误率的应用场合下，Bloom Filter比其他常见的算法（如hash，折半查找）极大节省了空间。<br>优点：<br>1)节约缓存空间（空值的映射），不再需要空值映射。<br>2)减少数据库或缓存的请求次数。<br>3)提升业务的处理效率以及业务隔离性。<br>缺点：<br>1)存在误判的概率。<br>2)传统的Bloom Filter不能作删除操作。   </p>
</blockquote>
<h4 id="hashset-URL去重复"><a href="#hashset-URL去重复" class="headerlink" title="hashset  URL去重复"></a>hashset  URL去重复</h4><pre>
//初始化set
private Set<string> urls = Sets.newSetFromMap(new ConcurrentHashMap<string, boolean="">());
//判断url是否在set中
public boolean isDuplicate(Request request, Task task) {
    return !urls.add(getUrl(request));
}</string,></string></pre>




<h3 id="抽取部分API"><a href="#抽取部分API" class="headerlink" title="抽取部分API"></a>抽取部分API</h3><table>
<thead>
<tr>
<th>方法</th>
<th style="text-align:center">说明</th>
<th style="text-align:right">示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>xpath(String xpath)</td>
<td style="text-align:center">使用XPath选择</td>
<td style="text-align:right">html.xpath(“//div[@class=’title’]”)</td>
</tr>
<tr>
<td>$(String selector)</td>
<td style="text-align:center">使用Css选择器选择</td>
<td style="text-align:right">html.$(“div.title”)</td>
</tr>
<tr>
<td>css(String selector)</td>
<td style="text-align:center">功能同$()，使用Css选择器选择</td>
<td style="text-align:right">html.css(“div.title”)</td>
</tr>
<tr>
<td>regex(String regex)</td>
<td style="text-align:center">使用正则表达式抽取</td>
<td style="text-align:right">html.regex(“(.*?)\”)</td>
</tr>
<tr>
<td>replace(String regex, String replacement)</td>
<td style="text-align:center">替换内容</td>
<td style="text-align:right">html.replace(“\”,””)</td>
</tr>
</tbody>
</table>
<p>这部分抽取API返回的都是一个Selectable接口，意思是说，抽取是支持链式调用的。</p>
<h3 id="代理池"><a href="#代理池" class="headerlink" title="代理池"></a>代理池</h3><h4 id="代理池初始化"><a href="#代理池初始化" class="headerlink" title="代理池初始化:"></a>代理池初始化:</h4><pre> 
//从以往保存的本地文件中读取代理信息作为新的代理池
public SimpleProxyPool() {
        this(null, true);
    }
//以往保存的本地文件中读取代理+用户输入的httpProxyList合并为新的代理池
public SimpleProxyPool(List<string[]> httpProxyList) {
        this(httpProxyList, true);
    }
//以往保存的本地文件中读取代理+用户输入的httpProxyList合并为新的代理池(后者可认为操控)
public SimpleProxyPool(List<string[]> httpProxyList, boolean isUseLastProxy) {
        if (httpProxyList != null) {
            addProxy(httpProxyList.toArray(new String[httpProxyList.size()][]));
        }
        if (isUseLastProxy) {
            if (!new File(proxyFilePath).exists()) {
                setFilePath();
            }
            readProxyList();
            timer.schedule(saveProxyTask, 0, saveProxyInterval);
        }
    }
</string[]></string[]></pre>


<h4 id="通过httpProxyList为代理池赋值"><a href="#通过httpProxyList为代理池赋值" class="headerlink" title="通过httpProxyList为代理池赋值"></a>通过httpProxyList为代理池赋值</h4><pre>
String[] source = { "::0.0.0.1:0", "::0.0.0.2:0", "::0.0.0.3:0", "::0.0.0.4:0" };
        for (String line : source) {
            httpProxyList.add(new String[] {line.split(":")[0], line.split(":")[1], line.split(":")[2], line.split(":")[3] });
        }
</pre>


<h4 id="本地文件Proxy获存储与获取-定时任务"><a href="#本地文件Proxy获存储与获取-定时任务" class="headerlink" title="本地文件Proxy获存储与获取:定时任务"></a>本地文件Proxy获存储与获取:定时任务</h4><pre>
//定时任务
private TimerTask saveProxyTask = new TimerTask() {

        @Override
        public void run() {
            saveProxyList();
            logger.info(allProxyStatus());
        }
    };
//如果需要重复使用本地代理
if (isUseLastProxy) {
            if (!new File(proxyFilePath).exists()) {
                setFilePath();
            }
            readProxyList();
            timer.schedule(saveProxyTask, 0, saveProxyInterval);
        }
</pre>


<p>saveProxyTask()函数负责把最新的代理池ip写入到本地指定文件  </p>
<h4 id="使用JDK自带PriorityQueue管理Proxy"><a href="#使用JDK自带PriorityQueue管理Proxy" class="headerlink" title="使用JDK自带PriorityQueue管理Proxy"></a>使用JDK自带PriorityQueue管理Proxy</h4><p>目的:可以根据compareTo方法制定的优先取出代理池中使用间隔较短的代理(一开始默认都为1.5s)优先取出并执行.  </p>
<pre>
public int compareTo(Delayed o) {
        Proxy that = (Proxy) o;
        return canReuseTime > that.canReuseTime ? 1 : (canReuseTime < that.canReuseTime ? -1 : 0);
    }
</pre>
<pre>
 private void siftUpComparable(int k, E x) {
        Comparable<? super E> key = (Comparable<? super E>) x;
        while (k > 0) {
            int parent = (k - 1) >>> 1;
            Object e = queue[parent];
            if (key.compareTo((E) e) >= 0)
                break;
            queue[k] = e;
            k = parent;
        }
        queue[k] = key;
    }
</pre>
webmagic代理池的策略是：

* 1. 在添加时连接相应端口做校验  
* 2. 每个代理有1.5S的使用间隔  
* 3. 每次失败后，下次取出代理的时间改为1.5S*失败次数  
* 4. 如果代理失败次数超过20次，则直接丢弃  

<pre>
 public void returnProxy(HttpHost host, int statusCode) {
        Proxy p = allProxy.get(host.getAddress().getHostAddress());
        if (p == null) {
            return;
        }
        switch (statusCode) {
              //成功
            case Proxy.SUCCESS:
                p.setReuseTimeInterval(reuseInterval);
                p.setFailedNum(0);
                p.setFailedErrorType(new ArrayList<integer>());
                p.recordResponse();
                p.successNumIncrement(1);
                break;
            //失败
            case Proxy.ERROR_403:
                // banned,try longer interval
                p.fail(Proxy.ERROR_403);
                p.setReuseTimeInterval(reuseInterval * p.getFailedNum());
                logger.info(host + " >>>> reuseTimeInterval is >>>> " + p.getReuseTimeInterval() / 1000.0);
                break;
            //代理被禁
            case Proxy.ERROR_BANNED:
                p.fail(Proxy.ERROR_BANNED);
                p.setReuseTimeInterval(10 * 60 * 1000 * p.getFailedNum());
                logger.warn("this proxy is banned >>>> " + p.getHttpHost());
                logger.info(host + " >>>> reuseTimeInterval is >>>> " + p.getReuseTimeInterval() / 1000.0);
                break;
            //404
            case Proxy.ERROR_404:
                // p.fail(Proxy.ERROR_404);
                // p.setReuseTimeInterval(reuseInterval * p.getFailedNum());
                break;
            default:
                p.fail(statusCode);
                break;
        }
        //当前代理失败次数超过20:reviveTime = 2 * 60 * 60 * 1000;
        if (p.getFailedNum() > 20) {
            p.setReuseTimeInterval(reviveTime);
            logger.error("remove proxy >>>> " + host + ">>>>" + p.getFailedType() + " >>>> remain proxy >>>> " + proxyQueue.size());
            return;
        }
        //检验代理ip符合下列要求的:当失败次数为5的倍数的时的校验
        if (p.getFailedNum() > 0 && p.getFailedNum() % 5 == 0) {
            if (!ProxyUtils.validateProxy(host)) {
                p.setReuseTimeInterval(reviveTime);
                logger.error("remove proxy >>>> " + host + ">>>>" + p.getFailedType() + " >>>> remain proxy >>>> " + proxyQueue.size());
                return;
            }
        }
        try {
            proxyQueue.put(p);
        } catch (InterruptedException e) {
            logger.warn("proxyQueue return proxy error", e);
        }
    }
</integer></pre>
使用Socket来校验代理是否有效,客户端为本地.创建与代理的连接
<pre>
public static boolean validateProxy(HttpHost p) {
        if (localAddr == null) {
            logger.error("cannot get local IP");
            return false;
        }
        boolean isReachable = false;
        Socket socket = null;
        try {
            socket = new Socket();
            socket.bind(new InetSocketAddress(localAddr, 0));
            InetSocketAddress endpointSocketAddr = new InetSocketAddress(p.getAddress().getHostAddress(), p.getPort());
            socket.connect(endpointSocketAddr, 3000);
            logger.debug("SUCCESS - connection established! Local: " + localAddr.getHostAddress() + " remote: " + p);
            isReachable = true;
        } catch (IOException e) {
            logger.warn("FAILRE - CAN not connect! Local: " + localAddr.getHostAddress() + " remote: " + p);
        } finally {
            if (socket != null) {
                try {
                    socket.close();
                } catch (IOException e) {
                    logger.warn("Error occurred while closing socket of validating proxy", e);
                }
            }
        }
        return isReachable;
    }
</pre>  

<h3 id="OOSpider-使用注解配置化"><a href="#OOSpider-使用注解配置化" class="headerlink" title="OOSpider 使用注解配置化"></a>OOSpider 使用注解配置化</h3><h4 id="注解的使用"><a href="#注解的使用" class="headerlink" title="注解的使用"></a>注解的使用</h4><pre>
//使用特有的抽取器
class ModelPageProcessor implements PageProcessor 
    @Override
    public void process(Page page) {
        for (PageModelExtractor pageModelExtractor : pageModelExtractorList) {
            extractLinks(page, pageModelExtractor.getHelpUrlRegionSelector(), pageModelExtractor.getHelpUrlPatterns());
            extractLinks(page, pageModelExtractor.getTargetUrlRegionSelector(), pageModelExtractor.getTargetUrlPatterns());
            Object process = pageModelExtractor.process(page);
            if (process == null || (process instanceof List && ((List) process).size() == 0)) {
                continue;
            }
            postProcessPageModel(pageModelExtractor.getClazz(), process);
            page.putField(pageModelExtractor.getClazz().getCanonicalName(), process);
        }
        if (page.getResultItems().getAll().size() == 0) {
            page.getResultItems().setSkip(true);
        }
    }

</pre>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="华子" />
          <p class="site-author-name" itemprop="name">华子</p>
           
              <p class="site-description motion-element" itemprop="description">展示自己的一些技术文章,以及自己克服的一些技术障碍,为以后回顾打好基础.</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">16</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ronghuaxu" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/hua-zi-xu-95" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-zhihu"></i>
                  
                  知乎
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/aikisshua" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://douban.com/people/148249272" target="_blank" title="豆瓣">
                  
                    <i class="fa fa-fw fa-douban"></i>
                  
                  豆瓣
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">华子</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  






  





  

  

  

  

</body>
</html>
